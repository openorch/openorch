"use strict";(self.webpackChunksingulatron_api_docs=self.webpackChunksingulatron_api_docs||[]).push([[6909],{25149:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>c});var s=t(74848),i=t(28453);const o={sidebar_position:3,tags:["test"]},r="Backend Environment Variables",a={id:"running/backend-environment-variables",title:"Backend Environment Variables",description:"SINGULATRONGPUPLATFORM",source:"@site/docs/running/backend-environment-variables.md",sourceDirName:"running",slug:"/running/backend-environment-variables",permalink:"/docs/running/backend-environment-variables",draft:!1,unlisted:!1,editUrl:"https://github.com/singulatron/singulatron/tree/main/docs-source/docs/running/backend-environment-variables.md",tags:[{inline:!0,label:"test",permalink:"/docs/tags/test"}],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,tags:["test"]},sidebar:"tutorialSidebar",previous:{title:"Frontend Environment Variables",permalink:"/docs/running/frontend-environment-variables"},next:{title:"Once it's running",permalink:"/docs/running/using"}},l={},c=[{value:"<code>SINGULATRON_GPU_PLATFORM</code>",id:"singulatron_gpu_platform",level:2},{value:"<code>SINGULATRON_VOLUME_NAME</code>",id:"singulatron_volume_name",level:2},{value:"<code>SINGULATRON_LLM_HOST</code>",id:"singulatron_llm_host",level:2},{value:"<code>SINGULATRON_DB</code>",id:"singulatron_db",level:2},{value:"PostgreSQL",id:"postgresql",level:3},{value:"<code>SINGULARON_LOCAL_STORAGE_PATH</code>",id:"singularon_local_storage_path",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h1,{id:"backend-environment-variables",children:"Backend Environment Variables"}),"\n",(0,s.jsx)(e.h2,{id:"singulatron_gpu_platform",children:(0,s.jsx)(e.code,{children:"SINGULATRON_GPU_PLATFORM"})}),"\n",(0,s.jsx)(e.p,{children:"This envar is used to enabel GPU acceleration.\nSupported platforms:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.code,{children:"cuda"})}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"Do not set this if your card doesn't support the given architecture or things will break."}),"\n",(0,s.jsx)(e.h2,{id:"singulatron_volume_name",children:(0,s.jsx)(e.code,{children:"SINGULATRON_VOLUME_NAME"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsxs)(e.strong,{children:["This flag is typically unnecessary since Singulatron automatically detects the volume that is bound to ",(0,s.jsx)(e.code,{children:"/root/.singulatron"}),". Use it only as a corrective action."]})}),"\n",(0,s.jsx)(e.p,{children:"This envar is needed when Singulatron runs as a container next to containers it starts:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sh",children:"Host\n |\n |-> Singulatron Container\n |-> Container Launched By Singulatron\n"})}),"\n",(0,s.jsxs)(e.p,{children:["For the containers like ",(0,s.jsx)(e.code,{children:"llama-cpp"})," to be able to read the models downloaded by Singulatron we they must both mount the same docker volume."]}),"\n",(0,s.jsxs)(e.p,{children:["An example of this can be seen in the root ",(0,s.jsx)(e.code,{children:"docker-compose.yaml"})," file: ",(0,s.jsx)(e.code,{children:"SINGULATRON_VOLUME_NAME=singulatron-data"}),"."]}),"\n",(0,s.jsx)(e.p,{children:"So cycle goes like this:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["Singulatron container writes to ",(0,s.jsx)(e.code,{children:"/root/.singulatron"}),", which is mounted to the volume ",(0,s.jsx)(e.code,{children:"singulatron-data"})]}),"\n",(0,s.jsxs)(e.li,{children:["Assets (which are basically downloaded files) will be passed to containers created by Singulatron by mounting files in ",(0,s.jsx)(e.code,{children:"singulatron-data"}),"."]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"singulatron_llm_host",children:(0,s.jsx)(e.code,{children:"SINGULATRON_LLM_HOST"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"This flag is typically unnecessary since Singulatron retrieves the IP of the Docker bridge. Use it only as a corrective action."})}),"\n",(0,s.jsx)(e.p,{children:"When Singulatron is running in a container, it needs to know how to address its siblings (other containers it started):"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sh",children:"Host\n |\n |-> Singulatron Container\n |-> Container Launched By Singulatron\n"})}),"\n",(0,s.jsxs)(e.p,{children:["The ",(0,s.jsx)(e.code,{children:"Singulatron Container"})," uses the envar ",(0,s.jsx)(e.code,{children:"SINGULATRON_LLM_HOST"})," to address ",(0,s.jsx)(e.code,{children:"Container Launched By Singulatron"}),"."]}),"\n",(0,s.jsxs)(e.p,{children:["Typically this value should be ",(0,s.jsx)(e.code,{children:"172.17.0.1"})," if you are using the default docker network."]}),"\n",(0,s.jsxs)(e.p,{children:["If you are using an other network than default, use ",(0,s.jsx)(e.code,{children:"docker network inspect"})," to find out the IP of your docker bridge for that network.\nUsually it's going to be ",(0,s.jsx)(e.code,{children:"172.18.0.1"}),"."]}),"\n",(0,s.jsx)(e.p,{children:"This envar is not needed if Singulatron runs directly on the host:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sh",children:"Host With Singulatron\n |\n |-> Container Launched By Singulatron\n"})}),"\n",(0,s.jsx)(e.h2,{id:"singulatron_db",children:(0,s.jsx)(e.code,{children:"SINGULATRON_DB"})}),"\n",(0,s.jsx)(e.p,{children:"You can use this envar to make Singulatron actually use a database instead of local file storage to store data."}),"\n",(0,s.jsx)(e.h3,{id:"postgresql",children:"PostgreSQL"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sh",children:'SINGULATRON_DB=postgres\nSINGULATRON_DB_DRIVER="postgres" # or "mysql"\nSINGULATRON_DB_STRING="postgres://postgres:mysecretpassword@localhost:5432/mydatabase?sslmode=disable"\n'})}),"\n",(0,s.jsx)(e.p,{children:"Naturally, you should change the details of the connection string to reflect your environment."}),"\n",(0,s.jsx)(e.h2,{id:"singularon_local_storage_path",children:(0,s.jsx)(e.code,{children:"SINGULARON_LOCAL_STORAGE_PATH"})}),"\n",(0,s.jsxs)(e.p,{children:["By default the local file storage will place files into ",(0,s.jsx)(e.code,{children:"~/.singulatron/data"}),", but this flag (and other config options) can override that."]})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},28453:(n,e,t)=>{t.d(e,{R:()=>r,x:()=>a});var s=t(96540);const i={},o=s.createContext(i);function r(n){const e=s.useContext(o);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:r(n.components),s.createElement(o.Provider,{value:e},n.children)}}}]);