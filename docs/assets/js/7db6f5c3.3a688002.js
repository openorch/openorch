"use strict";(self.webpackChunksingulatron_api_docs=self.webpackChunksingulatron_api_docs||[]).push([[3559],{88304:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>d});var s=i(74848),t=i(28453);const r={sidebar_position:80,tags:["registry-service","registry","microservices","addresses","authentication"]},o="Registry Svc",a={id:"services/registry-svc",title:"Registry Svc",description:"The registry service is designed to maintain a database of services, service instances and nodes.",source:"@site/docs/services/registry-svc.md",sourceDirName:"services",slug:"/services/registry-svc",permalink:"/docs/services/registry-svc",draft:!1,unlisted:!1,editUrl:"https://github.com/singulatron/superplatform/tree/main/docs-source/docs/services/registry-svc.md",tags:[{inline:!0,label:"registry-service",permalink:"/docs/tags/registry-service"},{inline:!0,label:"registry",permalink:"/docs/tags/registry"},{inline:!0,label:"microservices",permalink:"/docs/tags/microservices"},{inline:!0,label:"addresses",permalink:"/docs/tags/addresses"},{inline:!0,label:"authentication",permalink:"/docs/tags/authentication"}],version:"current",sidebarPosition:80,frontMatter:{sidebar_position:80,tags:["registry-service","registry","microservices","addresses","authentication"]},sidebar:"tutorialSidebar",previous:{title:"Prompt Svc",permalink:"/docs/services/prompt-svc"},next:{title:"Deploy Svc",permalink:"/docs/services/deploy-svc"}},c={},d=[{value:"Entities",id:"entities",level:2},{value:"Definition",id:"definition",level:3},{value:"Container based definition",id:"container-based-definition",level:4},{value:"Notes",id:"notes",level:4},{value:"Source code based definition",id:"source-code-based-definition",level:4},{value:"Instance",id:"instance",level:3},{value:"Deployment",id:"deployment",level:3},{value:"Node",id:"node",level:3},{value:"How It Works",id:"how-it-works",level:2}];function l(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"registry-svc",children:"Registry Svc"}),"\n",(0,s.jsx)(n.p,{children:"The registry service is designed to maintain a database of services, service instances and nodes."}),"\n",(0,s.jsx)(n.p,{children:"Its responsibilities include gathering information about:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Nodes: each Superplatform server registers itself as a node, which roughly correlates to a physical machine"}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["This page is a high level overview of the ",(0,s.jsx)(n.code,{children:"Registry Svc"}),". For more details, please see the ",(0,s.jsx)(n.a,{href:"/docs/superplatform/register-instance",children:"Registry Svc API documentation"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"entities",children:"Entities"}),"\n",(0,s.jsx)(n.h3,{id:"definition",children:"Definition"}),"\n",(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(n.code,{children:"Definition"})," or service definition consists of the following things:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"An ID"}),"\n",(0,s.jsx)(n.li,{children:"A container image to run and some additional information like the internal port exposed etc."}),"\n",(0,s.jsx)(n.li,{children:"A set of endpoint definitions (OpenAPI etc.)"}),"\n",(0,s.jsx)(n.li,{children:"The URL of different clients (JS, Go etc.)"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(n.code,{children:"Definition"})," is an abstract concept that can not be called. For a callable entity look at ",(0,s.jsx)(n.code,{children:"Instance"}),"s. Definitions are basically things you can deploy as an instance with a deployment."]}),"\n",(0,s.jsx)(n.h4,{id:"container-based-definition",children:"Container based definition"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"id: test-a\nimage:\n  name: hashicorp/http-echo\n  port: 8080\nhostPort: 8887\n"})}),"\n",(0,s.jsx)(n.h4,{id:"notes",children:"Notes"}),"\n",(0,s.jsx)(n.p,{children:"HostPorts are a temporary requirement until support for dynamic port assignment lands."}),"\n",(0,s.jsx)(n.h4,{id:"source-code-based-definition",children:"Source code based definition"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"id: test-b\nrepository:\n  url: https://github.com/singulatron/superplatform.git\n  containerFile: server/docker/Dockerfile\nhostPort: 9998\n"})}),"\n",(0,s.jsx)(n.h3,{id:"instance",children:"Instance"}),"\n",(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(n.code,{children:"Instance"})," or a service instance is an actual running, callable instance of a ",(0,s.jsx)(n.code,{children:"Definition"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(n.code,{children:"Instance"})," consists of the following things:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Address information that can be used to internally address the ",(0,s.jsx)(n.code,{children:"Instance"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"A Deployment ID."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"deployment",children:"Deployment"}),"\n",(0,s.jsxs)(n.p,{children:["Definitions become instances through the ",(0,s.jsx)(n.a,{href:"/docs/services/deploy-svc",children:"Deployment entity of the Deploy Service"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"node",children:"Node"}),"\n",(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(n.code,{children:"Node"})," is a physical or virtual machine that runs a Superplatform daemon. The daemon can then lauch service instances or other processes such as containers on these machines."]}),"\n",(0,s.jsx)(n.p,{children:"Maintaining a list of nodes is important so the daemon can efficiently distribute workload across the nodes."}),"\n",(0,s.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,s.jsx)(n.p,{children:"The registry is needed when you want to call services not included in the Superplatform daemon. You can think of the daemon as the standard library and services in the registry as third party libraries."}),"\n",(0,s.jsx)(n.p,{children:"When you want to call a service, you can ask the registry to provide you with a list of instance addresses for a service by service slug. Then you can use any of those instance addresses to make a call."}),"\n",(0,s.jsx)(n.p,{children:"Things like load balancing should be done on the client side at the moment, the damon does not provide a Proxy Svc yet."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var s=i(96540);const t={},r=s.createContext(t);function o(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);