<!--
 * @license
 * Copyright (c) The Authors (see the AUTHORS file)
 *
 * This source code is licensed under the GNU Affero General Public License v3.0 (AGPLv3) for personal, non-commercial use.
 * You may obtain a copy of the AGPL v3.0 at https://www.gnu.org/licenses/agpl-3.0.html.
 *
 * For commercial use, a separate license must be obtained by purchasing from The Authors.
 * For commercial licensing inquiries, please contact The Authors listed in the AUTHORS file.
 -->
<app-page title="Startup" [menuWidth]="'3rem'" [columnWidths]="['3rem']">
	<ng-template #columnContent>
		<div>
			<app-icon-menu></app-icon-menu>
		</div>
	</ng-template>
	<ng-template #mainContent>
		<app-centered [headerHeight]="'56px'" [vertical]="true">
			<div style="padding: 0rem 2rem">
				<h2 style="margin-bottom: 2rem">Nodes</h2>

				<div *ngIf="error" style="color: var(--ion-color-danger)">
					{{ error }}
				</div>

				<ion-list *ngIf="!error">
					<ng-container *ngFor="let node of nodes; let i = index">
						<ng-container *ngFor="let gpu of node.gpus; let i = index">
							<ion-card>
								<ion-card-header>
									<ion-card-title>{{ gpu.id }}</ion-card-title>
								</ion-card-header>
								<ion-card-content>
									<ion-item>
										<ion-label><strong>Intra Node ID:</strong></ion-label>
										<ion-text>{{ gpu.intraNodeId }}</ion-text>
									</ion-item>
									<ion-item>
										<ion-label><strong>Name:</strong></ion-label>
										<ion-text>{{ gpu.name }}</ion-text>
									</ion-item>
									<ion-item>
										<ion-label><strong>Bus ID:</strong></ion-label>
										<ion-text>{{ gpu.busId }}</ion-text>
									</ion-item>
									<ion-item>
										<ion-label><strong>Temperature:</strong></ion-label>
										<ion-text>{{ gpu.temperature }}Â°C</ion-text>
									</ion-item>
									<ion-item>
										<ion-label><strong>Performance State:</strong></ion-label>
										<ion-text>{{ gpu.performanceState }}</ion-text>
									</ion-item>
									<ion-item>
										<ion-label><strong>Power Usage:</strong></ion-label>
										<ion-text>{{ gpu.powerUsage }} W</ion-text>
									</ion-item>
									<ion-item>
										<ion-label><strong>Power Cap:</strong></ion-label>
										<ion-text>{{ gpu.powerCap }} W</ion-text>
									</ion-item>
									<ion-item>
										<ion-label><strong>Memory Usage:</strong></ion-label>
										<ion-text>{{ gpu.memoryUsage }} MB</ion-text>
									</ion-item>
									<ion-item>
										<ion-label><strong>Memory Total:</strong></ion-label>
										<ion-text>{{ gpu.memoryTotal }} MB</ion-text>
									</ion-item>
									<ion-item>
										<ion-label><strong>GPU Utilization:</strong></ion-label>
										<ion-text>{{ gpu.gpuUtilization }}%</ion-text>
									</ion-item>
									<ion-item>
										<ion-label><strong>Compute Mode:</strong></ion-label>
										<ion-text>{{ gpu.computeMode }}</ion-text>
									</ion-item>
									<ion-item>
										<ion-label><strong>Process Details:</strong></ion-label>
										<ion-list>
											<ion-item *ngFor="let process of gpu.processDetails">
												<ion-label>{{ process }}</ion-label>
											</ion-item>
										</ion-list>
									</ion-item>
								</ion-card-content>
							</ion-card>
						</ng-container>
					</ng-container>
				</ion-list>
			</div>
		</app-centered>
	</ng-template>
</app-page>
